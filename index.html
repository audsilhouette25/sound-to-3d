<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>IML Research Lab - High Precision</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://unpkg.com/ml5@0.12.2/dist/ml5.min.js"></script>
</head>
<body>
    <div id="ui-container">
        <header>
            <h1>IML Research Tool v2.0</h1>
            <div id="status" class="status-idle">엔진 대기 중</div>
        </header>

        <section id="audio-engine">
            <button id="btn-start" onclick="initEngine()">1. 오디오 엔진 가동</button>
            <button id="btn-record" class="hidden" onclick="handleRecord()">녹음 시작</button>
        </section>

        <section id="monitor-section" class="hidden">
            <h3>Live Audio Features (X)</h3>
            <div class="monitor-grid">
                <div class="m-item">Loudness <span id="val-loud">0.00</span></div>
                <div class="m-item">Pitch <span id="val-pitch">0.00</span></div>
                <div class="m-item">Bright <span id="val-bright">0.00</span></div>
                <div class="m-item">Rough <span id="val-rough">0.00</span></div>
            </div>
        </section>

        <section id="label-section" class="hidden">
            <h3>Visual Labeling (Y)</h3>
            <div class="slider-group">
                <label>y1: Angularity (각짐)</label>
                <input type="range" id="y1" min="0" max="1" step="0.01" value="0.2">
            </div>
            <div class="slider-group">
                <label>y2: Spikiness (첨예도)</label>
                <input type="range" id="y2" min="0" max="1" step="0.01" value="0.2">
            </div>
            <div class="slider-group">
                <label>y3: Roughness (질감)</label>
                <input type="range" id="y3" min="0" max="1" step="0.01" value="0.2">
            </div>
            <div class="slider-group">
                <label>y4: Complexity (밀도)</label>
                <input type="range" id="y4" min="0" max="1" step="0.01" value="0.2">
            </div>
            <button id="btn-confirm" onclick="confirmTraining()">데이터 확정 및 학습</button>
        </section>

        <footer>
            <div id="data-stats">Samples: <span id="count">0</span></div>
            <button onclick="exportCSV()">Export CSV</button>
        </footer>
    </div>
    <div id="canvas-container"></div>

    <script src="sketch.js"></script>
</body>
</html>
